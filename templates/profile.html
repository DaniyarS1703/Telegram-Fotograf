<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Профиль фотографа – {{ photographer.name }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Стили для jQuery UI Datepicker -->
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <!-- Стили для jQuery UI Timepicker Addon -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-ui-timepicker-addon/1.6.3/jquery-ui-timepicker-addon.min.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body { margin:0; padding:20px; font-family:'Helvetica Neue',Arial; background:#f0f2f5; }
    .profile-container { max-width:800px; margin:0 auto; background:#fff; padding:30px; border-radius:8px; box-shadow:0 4px 10px rgba(0,0,0,.1); position:relative; }
    .exit-btn { position:absolute; top:15px; right:15px; font-size:28px; background:rgba(255,255,255,.9); border-radius:50%; width:45px; height:45px; display:flex; align-items:center; justify-content:center; cursor:pointer; }
    .exit-btn:hover { background:#eee; }
    .profile-header { display:flex; align-items:center; gap:20px; margin-bottom:20px; }
    .avatar { width:130px; height:130px; border-radius:50%; object-fit:cover; border:2px solid #ddd; }
    .profile-info h2 { margin:0; font-size:32px; color:#333; }
    .profile-description { background:#f7f7f7; padding:20px; border-radius:8px; margin-bottom:25px; }
    .edit-btn { display:inline-block; margin-bottom:25px; padding:10px 20px; background:#007bff; color:#fff; border-radius:5px; text-decoration:none; }
    .edit-btn:hover { background:#0056b3; }

    /* === Новая сетка портфолио === */
    .portfolio-grid {
      display: grid;
      grid-auto-flow: column;
      grid-template-rows: repeat(3, 120px);
      gap: 15px;
      overflow-x: auto;
      padding-bottom: 10px;
    }
    .portfolio-grid img {
      width:120px; height:120px;
      object-fit:cover;
      border-radius:8px;
      box-shadow:0 2px 4px rgba(0,0,0,.1);
    }
    .portfolio-grid::-webkit-scrollbar { height:8px; }
    .portfolio-grid::-webkit-scrollbar-thumb { background:#bbb; border-radius:4px; }
    .portfolio-grid::-webkit-scrollbar-track { background:#eee; }
    /* =============================== */

    .order-btn { display:block; width:70%; margin:30px auto; padding:15px; background:#28a745; color:#fff; border-radius:5px; text-align:center; text-decoration:none; }
    .order-btn.disabled { opacity:.5; pointer-events:none; }
    .date-time-wrapper { display:flex; gap:20px; flex-wrap:wrap; justify-content:center; margin-bottom:25px; }
    .date-selector, .time-selector { background:#fff; padding:20px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,.1); }
    .time-spinner { padding:10px; border-radius:5px; border:1px solid #ccc; }
  </style>
</head>
<body>
  <div class="profile-container">
    <a href="javascript:history.back()" class="exit-btn"><i class="fa-solid fa-xmark"></i></a>
    <div class="profile-header">
      <img class="avatar" src="{{ photographer.avatar or 'default-avatar.png' }}" alt="{{ photographer.name }}">
      <div class="profile-info">
        <h2>{{ photographer.name }}</h2>
        <p>Город: {{ photographer.city or 'Не указан' }}</p>
        <p>Рейтинг: {{ photographer.rating }}</p>
      </div>
    </div>
    <a href="{{ url_for('edit_profile', id=photographer.id) }}" class="edit-btn">Редактировать профиль</a>
    <div class="profile-description">
      <h3>О себе</h3>
      <p>{{ photographer.description }}</p>
    </div>
    <div class="portfolio">
      <h3>Портфолио</h3>
      <div class="portfolio-grid">
        {% for image in photographer.portfolio_list %}
          <img src="{{ image }}" alt="Portfolio Image">
        {% endfor %}
      </div>
    </div>
    <div class="date-time-wrapper">
      <div class="date-selector"><h3>Выберите дату</h3><div id="datepicker"></div></div>
      <div class="time-selector"><h3>Выберите время</h3><div class="time-select-container"><select id="hour-spinner" class="time-spinner"></select><select id="minute-spinner" class="time-spinner"></select></div></div>
    </div>
    <div><input type="checkbox" id="terms-checkbox"> <label for="terms-checkbox">С правилами ознакомлен</label></div>
    <a href="/order/{{ photographer.id }}" class="order-btn disabled" id="order-btn">Оформить заказ</a>
  </div>
</body>
</html>
